<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.singermodel.mapper.SingerMapper">
    <!-- 连表分页查询歌手（带地区名和歌手类型名） -->
    <select id="selectSingerPage" resultType="org.example.common.pojo.Singer">
        SELECT s.*, r.name AS region, st.name AS type
        FROM singer s
        LEFT JOIN region r ON s.region_id = r.region_id
        LEFT JOIN singer_type st ON s.type_id = st.type_id
        <where>
            <if test="name != null and name != ''">
                AND s.name LIKE CONCAT('%', #{name}, '%')
            </if>
            <if test="gender != null and gender != ''">
                AND s.gender = #{gender}
            </if>
            <if test="regionId != null">
                AND s.region_id = #{regionId}
            </if>
            <if test="typeId != null">
                AND s.type_id = #{typeId}
            </if>
        </where>
        ORDER BY s.singer_id DESC
    </select>

</mapper>


